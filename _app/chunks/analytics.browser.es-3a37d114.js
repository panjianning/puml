function rr(e,r,t,n,a){for(r=r.split?r.split("."):r,n=0;n<r.length;n++)e=e?e[r[n]]:a;return e===a?t:e}var tr,nr="any",ar="*",$e=typeof process!="undefined"?process:{};(tr=$e.env)==null||tr.NODE_ENV;var Z=typeof window!="undefined";$e.versions!=null&&$e.versions.node!=null;typeof Deno!="undefined"&&Deno.core;Z&&window.name==="nodejs"||typeof navigator!="undefined"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));function Te(e,r){return typeof r===e}var ee=Te.bind(null,"function"),ye=Te.bind(null,"string"),be=Te.bind(null,"undefined"),Jr=Te.bind(null,"boolean");function Xr(e){return Object.prototype.toString.call(e)==="[object Array]"}function Yr(e){return e&&(typeof e=="object"||e!==null)}function Y(e){if(!Yr(e))return!1;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}function ir(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function Kr(){if(Z){var e=navigator,r=e.languages;return e.userLanguage||(r&&r.length?r[0]:e.language)}}function Zr(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function Qr(e){return function(r){for(var t,n=Object.create(null),a=/([^&=]+)=?([^&]*)/g;t=a.exec(r);){var u=ir(t[1]),f=ir(t[2]);u.substring(u.length-2)==="[]"?(n[u=u.substring(0,u.length-2)]||(n[u]=[])).push(f):n[u]=f===""||f}for(var l in n){var v=l.split("[");v.length>1&&(et(n,v.map(function(m){return m.replace(/[?[\]\\ ]/g,"")}),n[l]),delete n[l])}return n}(function(r){if(r){var t=r.match(/\?(.*)/);return t&&t[1]?t[1].split("#")[0]:""}return Z&&window.location.search.substring(1)}(e))}function et(e,r,t){for(var n=r.length-1,a=0;a<n;++a){var u=r[a];if(u==="__proto__"||u==="constructor")break;u in e||(e[u]={}),e=e[u]}e[r[n]]=t}function _e(){for(var e="",r=0,t=4294967295*Math.random()|0;r++<36;){var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[r-1],a=15&t;e+=n=="-"||n=="4"?n:(n=="x"?a:3&a|8).toString(16),t=r%8==0?4294967295*Math.random()|0:t>>4}return e}var we="global",ae="undefined",Ue=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||void 0;function Se(e){return Ue[e]}function pe(e,r){return Ue[e]=r,r}function je(e){pe(e)}function rt(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}var tt=rt;function nt(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}var at=nt;function it(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var ut=it;function ot(e){return tt(e)||at(e)||ut()}var Ee=ot;function ur(e,r){return r={exports:{}},e(r,r.exports),r.exports}var J=ur(function(e){function r(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(u){return typeof u}:r=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},r(n)}function t(n){return typeof Symbol=="function"&&r(Symbol.iterator)==="symbol"?e.exports=t=function(u){return r(u)}:e.exports=t=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":r(u)},t(n)}e.exports=t}),st=ur(function(e){var r=function(t){var n=Object.prototype,a=n.hasOwnProperty,u,f=typeof Symbol=="function"?Symbol:{},l=f.iterator||"@@iterator",v=f.asyncIterator||"@@asyncIterator",m=f.toStringTag||"@@toStringTag";function y(d,c,o){return Object.defineProperty(d,c,{value:o,enumerable:!0,configurable:!0,writable:!0}),d[c]}try{y({},"")}catch{y=function(c,o,i){return c[o]=i}}function A(d,c,o,i){var s=c&&c.prototype instanceof O?c:O,g=Object.create(s.prototype),S=new $(i||[]);return g._invoke=H(d,o,S),g}t.wrap=A;function h(d,c,o){try{return{type:"normal",arg:d.call(c,o)}}catch(i){return{type:"throw",arg:i}}}var w="suspendedStart",I="suspendedYield",N="executing",P="completed",x={};function O(){}function C(){}function T(){}var W={};W[l]=function(){return this};var M=Object.getPrototypeOf,D=M&&M(M(X([])));D&&D!==n&&a.call(D,l)&&(W=D);var z=T.prototype=O.prototype=Object.create(W);C.prototype=z.constructor=T,T.constructor=C,C.displayName=y(T,m,"GeneratorFunction");function F(d){["next","throw","return"].forEach(function(c){y(d,c,function(o){return this._invoke(c,o)})})}t.isGeneratorFunction=function(d){var c=typeof d=="function"&&d.constructor;return c?c===C||(c.displayName||c.name)==="GeneratorFunction":!1},t.mark=function(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,T):(d.__proto__=T,y(d,m,"GeneratorFunction")),d.prototype=Object.create(z),d},t.awrap=function(d){return{__await:d}};function V(d,c){function o(g,S,b,_){var j=h(d[g],d,S);if(j.type==="throw")_(j.arg);else{var G=j.arg,k=G.value;return k&&typeof k=="object"&&a.call(k,"__await")?c.resolve(k.__await).then(function(U){o("next",U,b,_)},function(U){o("throw",U,b,_)}):c.resolve(k).then(function(U){G.value=U,b(G)},function(U){return o("throw",U,b,_)})}}var i;function s(g,S){function b(){return new c(function(_,j){o(g,S,_,j)})}return i=i?i.then(b,b):b()}this._invoke=s}F(V.prototype),V.prototype[v]=function(){return this},t.AsyncIterator=V,t.async=function(d,c,o,i,s){s===void 0&&(s=Promise);var g=new V(A(d,c,o,i),s);return t.isGeneratorFunction(c)?g:g.next().then(function(S){return S.done?S.value:g.next()})};function H(d,c,o){var i=w;return function(g,S){if(i===N)throw new Error("Generator is already running");if(i===P){if(g==="throw")throw S;return K()}for(o.method=g,o.arg=S;;){var b=o.delegate;if(b){var _=R(b,o);if(_){if(_===x)continue;return _}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(i===w)throw i=P,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);i=N;var j=h(d,c,o);if(j.type==="normal"){if(i=o.done?P:I,j.arg===x)continue;return{value:j.arg,done:o.done}}else j.type==="throw"&&(i=P,o.method="throw",o.arg=j.arg)}}}function R(d,c){var o=d.iterator[c.method];if(o===u){if(c.delegate=null,c.method==="throw"){if(d.iterator.return&&(c.method="return",c.arg=u,R(d,c),c.method==="throw"))return x;c.method="throw",c.arg=new TypeError("The iterator does not provide a 'throw' method")}return x}var i=h(o,d.iterator,c.arg);if(i.type==="throw")return c.method="throw",c.arg=i.arg,c.delegate=null,x;var s=i.arg;if(!s)return c.method="throw",c.arg=new TypeError("iterator result is not an object"),c.delegate=null,x;if(s.done)c[d.resultName]=s.value,c.next=d.nextLoc,c.method!=="return"&&(c.method="next",c.arg=u);else return s;return c.delegate=null,x}F(z),y(z,m,"Generator"),z[l]=function(){return this},z.toString=function(){return"[object Generator]"};function Q(d){var c={tryLoc:d[0]};1 in d&&(c.catchLoc=d[1]),2 in d&&(c.finallyLoc=d[2],c.afterLoc=d[3]),this.tryEntries.push(c)}function L(d){var c=d.completion||{};c.type="normal",delete c.arg,d.completion=c}function $(d){this.tryEntries=[{tryLoc:"root"}],d.forEach(Q,this),this.reset(!0)}t.keys=function(d){var c=[];for(var o in d)c.push(o);return c.reverse(),function i(){for(;c.length;){var s=c.pop();if(s in d)return i.value=s,i.done=!1,i}return i.done=!0,i}};function X(d){if(d){var c=d[l];if(c)return c.call(d);if(typeof d.next=="function")return d;if(!isNaN(d.length)){var o=-1,i=function s(){for(;++o<d.length;)if(a.call(d,o))return s.value=d[o],s.done=!1,s;return s.value=u,s.done=!0,s};return i.next=i}}return{next:K}}t.values=X;function K(){return{value:u,done:!0}}return $.prototype={constructor:$,reset:function(d){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(L),!d)for(var c in this)c.charAt(0)==="t"&&a.call(this,c)&&!isNaN(+c.slice(1))&&(this[c]=u)},stop:function(){this.done=!0;var d=this.tryEntries[0],c=d.completion;if(c.type==="throw")throw c.arg;return this.rval},dispatchException:function(d){if(this.done)throw d;var c=this;function o(_,j){return g.type="throw",g.arg=d,c.next=_,j&&(c.method="next",c.arg=u),!!j}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],g=s.completion;if(s.tryLoc==="root")return o("end");if(s.tryLoc<=this.prev){var S=a.call(s,"catchLoc"),b=a.call(s,"finallyLoc");if(S&&b){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(S){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else if(b){if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(d,c){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&(d==="break"||d==="continue")&&s.tryLoc<=c&&c<=s.finallyLoc&&(s=null);var g=s?s.completion:{};return g.type=d,g.arg=c,s?(this.method="next",this.next=s.finallyLoc,x):this.complete(g)},complete:function(d,c){if(d.type==="throw")throw d.arg;return d.type==="break"||d.type==="continue"?this.next=d.arg:d.type==="return"?(this.rval=this.arg=d.arg,this.method="return",this.next="end"):d.type==="normal"&&c&&(this.next=c),x},finish:function(d){for(var c=this.tryEntries.length-1;c>=0;--c){var o=this.tryEntries[c];if(o.finallyLoc===d)return this.complete(o.completion,o.afterLoc),L(o),x}},catch:function(d){for(var c=this.tryEntries.length-1;c>=0;--c){var o=this.tryEntries[c];if(o.tryLoc===d){var i=o.completion;if(i.type==="throw"){var s=i.arg;L(o)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(d,c,o){return this.delegate={iterator:X(d),resultName:c,nextLoc:o},this.method==="next"&&(this.arg=u),x}},t}(e.exports);try{regeneratorRuntime=r}catch{Function("r","regeneratorRuntime = r")(r)}}),B=st;function or(e,r,t,n,a,u,f){try{var l=e[u](f),v=l.value}catch(m){t(m);return}l.done?r(v):Promise.resolve(v).then(n,a)}function ct(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var u=e.apply(r,t);function f(v){or(u,n,a,f,l,"next",v)}function l(v){or(u,n,a,f,l,"throw",v)}f(void 0)})}}var re=ct;function ft(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ie=ft;function sr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function lt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?sr(t,!0).forEach(function(n){ie(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sr(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var p=lt,ue="function",te="undefined",Ie="reducer",cr="@@redux/",ze=cr+"INIT",dt=cr+Math.random().toString(36),fr=function(){return(typeof Symbol=="undefined"?"undefined":J(Symbol))===ue&&Symbol.observable||"@@observable"}(),Le=" != "+ue;function lr(e,r,t){if(J(r)===ue&&J(t)===te&&(t=r,r=void 0),J(t)!==te){if(J(t)!==ue)throw new Error("enhancer"+Le);return t(lr)(e,r)}if(J(e)!==ue)throw new Error(Ie+Le);var n=e,a=r,u=[],f=u,l=!1;function v(){f===u&&(f=u.slice())}function m(){return a}function y(I){if(J(I)!==ue)throw new Error("Listener"+Le);var N=!0;return v(),f.push(I),function(){if(!!N){N=!1,v();var x=f.indexOf(I);f.splice(x,1)}}}function A(I){if(!Y(I))throw new Error("Act != obj");if(J(I.type)===te)throw new Error("ActType "+te);if(l)throw new Error("Dispatch in "+Ie);try{l=!0,a=n(a,I)}finally{l=!1}for(var N=u=f,P=0;P<N.length;P++){var x=N[P];x()}return I}function h(I){if(J(I)!==ue)throw new Error("next "+Ie+Le);n=I,A({type:ze})}function w(){var I=y;return ie({subscribe:function(P){if(J(P)!=="object")throw new TypeError("Observer != obj");function x(){P.next&&P.next(m())}x();var O=I(x);return{unsubscribe:O}}},fr,function(){return this})}return A({type:ze}),ie({dispatch:A,subscribe:y,getState:m,replaceReducer:h},fr,w)}function pt(e,r){var t=r&&r.type,n=t&&t.toString()||"?";return"action "+n+Ie+" "+e+" returns "+te}function vt(e){Object.keys(e).forEach(function(r){var t=e[r],n=t(void 0,{type:ze});if(J(n)===te||J(t(void 0,{type:dt}))===te)throw new Error(Ie+" "+r+" "+te)})}function gt(e){for(var r=Object.keys(e),t={},n=0;n<r.length;n++){var a=r[n];J(e[a])===ue&&(t[a]=e[a])}var u=Object.keys(t),f;try{vt(t)}catch(l){f=l}return function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=arguments.length>1?arguments[1]:void 0;if(f)throw f;for(var y=!1,A={},h=0;h<u.length;h++){var w=u[h],I=t[w],N=v[w],P=I(N,m);if(J(P)===te){var x=pt(w,m);throw new Error(x)}A[w]=P,y=y||P!==N}return y?A:v}}function ve(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.length===0?function(n){return n}:r.length===1?r[0]:r.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function ht(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){return function(a,u,f){var l=n(a,u,f),v=l.dispatch,m=[],y={getState:l.getState,dispatch:function(h){return v(h)}};return m=r.map(function(A){return A(y)}),v=ve.apply(void 0,Ee(m))(l.dispatch),p(p({},l),{},{dispatch:v})}}}var dr="analytics",oe="userId",ge="anonymousId",mt="https://lytics.dev/errors/",ce="__",ne=ce+"anon_id",se=ce+"user_id",fe=ce+"user_traits",xn=Object.freeze({ANON_ID:ne,USER_ID:se,USER_TRAITS:fe}),Me=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],Ge=["name","EVENTS","config","loaded"],yt={registerPluginType:function(r){return"registerPlugin:".concat(r)},pluginReadyType:function(r){return"ready:".concat(r)}},E=Me.reduce(function(e,r){return e[r]=r,e},yt);function bt(e){return Me.includes(e)}var pr=/^utm_/,vr=/^an_prop_/,gr=/^an_trait_/;function wt(e){var r=e.storage.setItem;return function(t){return function(n){return function(a){if(a.type===E.bootstrap){var u=a.params,f=a.user,l=a.persistedUser,v=a.initialUser,m=l.userId===f.userId;l.anonymousId!==f.anonymousId&&r(ne,f.anonymousId),m||r(se,f.userId),v.traits&&r(fe,p(p({},m&&l.traits?l.traits:{}),v.traits));var y=Object.keys(a.params);if(y.length){var A=u.an_uid,h=u.an_event,w=y.reduce(function(I,N){if(N.match(pr)||N.match(/^(d|g)clid/)){var P=N.replace(pr,""),x=P==="campaign"?"name":P;I.campaign[x]=u[N]}return N.match(vr)&&(I.props[N.replace(vr,"")]=u[N]),N.match(gr)&&(I.traits[N.replace(gr,"")]=u[N]),I},{campaign:{},props:{},traits:{}});t.dispatch(p(p({type:E.params,raw:u},w),A?{userId:A}:{})),A&&setTimeout(function(){return e.identify(A,w.traits)},0),h&&setTimeout(function(){return e.track(h,w.props)},0),Object.keys(w.campaign).length&&t.dispatch({type:E.campaign,campaign:w.campaign})}}return n(a)}}}}function St(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n.type===E.setItemEnd){if(n.key===ne)return p(p({},t),{anonymousId:n.value});if(n.key===se)return p(p({},t),{userId:n.value})}switch(n.type){case E.identify:return Object.assign({},t,{userId:n.userId,traits:p(p({},t.traits),n.traits)});case E.reset:return[se,ne,fe].forEach(function(a){e.removeItem(a)}),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}}function hr(e){return{userId:e.getItem(se),anonymousId:e.getItem(ne),traits:e.getItem(fe)}}var qe=function(r){return ce+"TEMP"+ce+r};function Et(e){return function(t,n,a){var u=n.getState("user")[t];if(u)return u;if(a&&Y(a)&&a[t])return a[t];var f=hr(e)[t];return f||Se(qe(t))||null}}function It(e){var r=e.storage,t=r.setItem,n=r.removeItem,a=r.getItem;return function(u){return function(f){return function(l){var v=l.userId,m=l.traits,y=l.options;if(l.type===E.reset&&([se,fe,ne].forEach(function(w){n(w)}),[oe,ge,"traits"].forEach(function(w){je(qe(w))})),l.type===E.identify){a(ne)||t(ne,_e());var A=a(se),h=a(fe)||{};A&&A!==v&&u.dispatch({type:E.userIdChanged,old:{userId:A,traits:h},new:{userId:v,traits:m},options:y}),v&&t(se,v),m&&t(fe,p(p({},h),m))}return f(l)}}}}var Oe={};function mr(e,r){Oe[e]&&ee(Oe[e])&&(Oe[e](r),delete Oe[e])}function yr(e,r,t){return new Promise(function(n,a){return r()?n(e):t<1?a(p(p({},e),{},{queue:!0})):Ot(10).then(function(u){return yr(e,r,t-10).then(n,a)})})}function Ot(e){return new Promise(function(r){return setTimeout(r,e)})}function br(e,r,t){var n=r(),a=e.getState(),u=a.plugins,f=a.context,l=a.queue,v=a.user,m=!f.offline;if(m&&l&&l.actions&&l.actions.length){var y=l.actions.reduce(function(h,w,I){var N=u[w.plugin].loaded;return N?(h.process.push(w),h.processIndex.push(I)):(h.requeue.push(w),h.requeueIndex.push(I)),h},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(y.processIndex&&y.processIndex.length){y.processIndex.forEach(function(h){var w=l.actions[h],I=w.plugin,N=w.payload.type,P=n[I][N];if(P&&ee(P)){var x=At(w.payload,v);P({payload:x,config:u[I].config,instance:t});var O="".concat(N,":").concat(I);e.dispatch(p(p({},x),{},{type:O,_:{called:O,from:"queueDrain"}}))}});var A=l.actions.filter(function(h,w){return!~y.processIndex.indexOf(w)});l.actions=A}}}function Pt(e,r,t){return setInterval(function(){return br(e,r,t)},3e3)}function At(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return[oe,ge].reduce(function(t,n){return e.hasOwnProperty(n)&&r[n]&&r[n]!==e[n]&&(t[n]=r[n]),t},e)}function Nt(e){if(Array.isArray(e))return e}var xt=Nt;function Tt(e,r){var t=[],n=!0,a=!1,u=void 0;try{for(var f=e[Symbol.iterator](),l;!(n=(l=f.next()).done)&&(t.push(l.value),!(r&&t.length===r));n=!0);}catch(v){a=!0,u=v}finally{try{!n&&f.return!=null&&f.return()}finally{if(a)throw u}}return t}var _t=Tt;function jt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var Lt=jt;function Mt(e,r){return xt(e)||_t(e,r)||Lt()}var Rt=Mt;function Dt(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(e).filter(function(n){var a=t.plugins||{};return Jr(a[n])?a[n]:!(a.all===!1||r[n]&&r[n].enabled===!1)}).map(function(n){return e[n]})}var he=/Start$/,wr=/^bootstrap/,Sr=/^ready/;function kt(e,r,t,n,a){return Fe.apply(this,arguments)}function Fe(){return Fe=re(B.mark(function e(r,t,n,a,u){var f,l,v,m,y,A,h,w,I,N,P;return B.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(f=ee(t)?t():t,l=r.type,v=l.replace(he,""),!(r._&&r._.called)){O.next=5;break}return O.abrupt("return",r);case 5:return m=n.getState(),y=Dt(f,m.plugins,r.options),l===E.initializeStart&&r.fromEnable&&(y=Object.keys(m.plugins).filter(function(C){var T=m.plugins[C];return r.plugins.includes(C)&&!T.initialized}).map(function(C){return f[C]})),A=y.map(function(C){return C.name}),h=$t(l,y),O.next=12,Ve({action:r,data:{exact:h.before,namespaced:h.beforeNS},state:m,allPlugins:f,allMatches:h,instance:n,store:a,EVENTS:u});case 12:if(w=O.sent,!Pr(w,A.length)){O.next=15;break}return O.abrupt("return",w);case 15:if(l!==v){O.next=19;break}I=w,O.next=22;break;case 19:return O.next=21,Ve({action:p(p({},w),{},{type:v}),data:{exact:h.during,namespaced:h.duringNS},state:m,allPlugins:f,allMatches:h,instance:n,store:a,EVENTS:u});case 21:I=O.sent;case 22:if(!l.match(he)){O.next=28;break}return N="".concat(v,"End"),O.next=26,Ve({action:p(p({},I),{},{type:N}),data:{exact:h.after,namespaced:h.afterNS},state:m,allPlugins:f,allMatches:h,instance:n,store:a,EVENTS:u});case 26:P=O.sent,P.meta&&P.meta.hasCallback&&mr(P.meta.rid,{payload:P});case 28:return O.abrupt("return",w);case 29:case"end":return O.stop()}},e)})),Fe.apply(this,arguments)}function Ve(e){return We.apply(this,arguments)}function We(){return We=re(B.mark(function e(r){var t,n,a,u,f,l,v,m,y,A,h,w,I,N,P,x,O,C;return B.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return t=r.data,n=r.action,a=r.instance,u=r.state,f=r.allPlugins,l=r.allMatches,v=r.store,m=r.EVENTS,y=u.plugins,A=u.context,h=n.type,w=h.match(he),I=t.exact.map(function(M){return M.pluginName}),w&&(I=l.during.map(function(M){return M.pluginName})),N=Ut(a,I),P=t.exact.reduce(function(M,D){var z=D.pluginName,F=D.methodName,V=!1;return!F.match(/^initialize/)&&!F.match(/^reset/)&&(V=!y[z].loaded),A.offline&&F.match(/^(page|track|identify)/)&&(V=!0),M["".concat(z)]=V,M},{}),W.next=10,t.exact.reduce(function(){var M=re(B.mark(function D(z,F,V){var H,R,Q;return B.wrap(function($){for(;;)switch($.prev=$.next){case 0:return H=F.pluginName,$.next=3,z;case 3:if(R=$.sent,!(t.namespaced&&t.namespaced[H])){$.next=11;break}return $.next=7,t.namespaced[H].reduce(function(){var X=re(B.mark(function K(d,c,o){var i,s,g,S;return B.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return s=function(G,k,U){return function(q,xe){var de=U||k;return p(p({},G),{},{abort:{reason:q,plugins:xe||[k],caller:h,from:de}})}},_.next=3,d;case 3:if(i=_.sent,!(!c.method||!ee(c.method))){_.next=6;break}return _.abrupt("return",i);case 6:return qt(c.methodName,c.pluginName),_.next=9,c.method({payload:i,instance:a,abort:s(i,H,c.pluginName),config:Er(c.pluginName,y,f),plugins:y});case 9:return g=_.sent,S=Y(g)?g:{},_.abrupt("return",Promise.resolve(p(p({},i),S)));case 12:case"end":return _.stop()}},K)}));return function(K,d,c){return X.apply(this,arguments)}}(),Promise.resolve(n));case 7:Q=$.sent,R[H]=Q,$.next=12;break;case 11:R[H]=n;case 12:return $.abrupt("return",Promise.resolve(R));case 13:case"end":return $.stop()}},D)}));return function(D,z,F){return M.apply(this,arguments)}}(),Promise.resolve({}));case 10:return x=W.sent,W.next=13,t.exact.reduce(function(){var M=re(B.mark(function D(z,F,V){var H,R,Q,L,$,X,K,d,c,o,i,s,g;return B.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return H=t.exact.length===V+1,R=F.pluginName,Q=f[R],b.next=5,z;case 5:if(L=b.sent,$=x[R]?x[R]:{},w&&($=L),!He($,R)){b.next=11;break}return Be({data:$,method:h,instance:a,pluginName:R,store:v}),b.abrupt("return",Promise.resolve(L));case 11:if(!He(L,R)){b.next=14;break}return H&&Be({data:L,method:h,instance:a,store:v}),b.abrupt("return",Promise.resolve(L));case 14:if(!(P.hasOwnProperty(R)&&P[R]===!0)){b.next=17;break}return v.dispatch({type:"queue",plugin:R,payload:$,_:{called:"queue",from:"queueMechanism"}}),b.abrupt("return",Promise.resolve(L));case 17:return X=N(x[R],f[R]),b.next=20,Q[h]({abort:X.abort,payload:$,instance:a,config:Er(R,y,f),plugins:y});case 20:return K=b.sent,d=Y(K)?K:{},c=p(p({},L),d),o=x[R],He(o,R)?Be({data:o,method:h,instance:a,pluginName:R,store:v}):(i="".concat(h,":").concat(R),s=(i.match(/:/g)||[]).length,s<2&&!h.match(wr)&&!h.match(Sr)&&(g=w?c:$,a.dispatch(p(p({},g),{},{type:i,_:{called:i,from:"submethod"}})))),b.abrupt("return",Promise.resolve(c));case 26:case"end":return b.stop()}},D)}));return function(D,z,F){return M.apply(this,arguments)}}(),Promise.resolve(n));case 13:if(O=W.sent,!(!h.match(he)&&!h.match(/^registerPlugin/)&&!h.match(Sr)&&!h.match(wr)&&!h.match(/^params/)&&!h.match(/^userIdChanged/))){W.next=21;break}if(m.plugins.includes(h),!(O._&&O._.originalAction===h)){W.next=18;break}return W.abrupt("return",O);case 18:C=p(p({},O),{_:{originalAction:O.type,called:O.type,from:"engineEnd"}}),Pr(O,t.exact.length)&&!h.match(/End$/)&&(C=p(p({},C),{type:O.type+"Aborted"})),v.dispatch(C);case 21:return W.abrupt("return",O);case 22:case"end":return W.stop()}},e)})),We.apply(this,arguments)}function Be(e){var r=e.data,t=e.method;e.instance;var n=e.pluginName,a=e.store,u=n?":"+n:"",f=t+"Aborted"+u;a.dispatch(p(p({},r),{},{type:f,_:{called:f,from:"abort"}}))}function Er(e,r,t){var n=r[e]||t[e];return n&&n.config?n.config:{}}function Ir(e,r){return r.reduce(function(t,n){return n[e]?t.concat({methodName:e,pluginName:n.name,method:n[e]}):t},[])}function Ct(e){return e.replace(he,"")}function Or(e,r){var t=Ct(e),n=r?":".concat(r):"",a="".concat(e).concat(n),u="".concat(t).concat(n),f="".concat(t,"End").concat(n);return[a,u,f]}function $t(e,r,t){var n=Or(e),a=n.map(function(u){return Ir(u,r)});return r.reduce(function(u,f){var l=f.name,v=Or(e,l),m=v.map(function(I){return Ir(I,r)}),y=Rt(m,3),A=y[0],h=y[1],w=y[2];return A.length&&(u.beforeNS[l]=A),h.length&&(u.duringNS[l]=h),w.length&&(u.afterNS[l]=w),u},{before:a[0],beforeNS:{},during:a[1],duringNS:{},after:a[2],afterNS:{}})}function He(e,r){var t=e.abort;return t?t===!0?!0:Ar(t,r)||t&&Ar(t.plugins,r):!1}function Pr(e,r){var t=e.abort;if(!t)return!1;if(t===!0||ye(t))return!0;var n=t.plugins;return Pe(t)&&t.length===r||Pe(n)&&n.length===r}function Pe(e){return Array.isArray(e)}function Ar(e,r){return!e||!Pe(e)?!1:e.includes(r)}function Ut(e,r){return function(t,n,a){var u=n.config,f=n.name,l="".concat(f,".").concat(t.type);a&&(l=a.event);var v=t.type.match(he)?zt(f,l,r,a,t):Gt(t,l);return{payload:Ft(t),instance:e,config:u||{},abort:v}}}function zt(e,r,t,n,a){return function(u,f){var l=n?n.name:e,v=f&&Pe(f)?f:t;if(n&&(v=f&&Pe(f)?f:[e],!v.includes(e)||v.length!==1))throw new Error("Method ".concat(r," can only abort ").concat(e," plugin. ").concat(JSON.stringify(v)," input valid"));return p(p({},a),{},{abort:{reason:u,plugins:v,caller:r,_:l}})}}function Gt(e,r){return function(){throw new Error(e.type+" action not cancellable. Remove abort in "+r)}}function qt(e,r){var t=Nr(e),n=t&&t.name===r;if(n){var a=Nr(t.method),u=a?"or "+a.method:"";throw new Error([r+" plugin is calling method "+e,"Plugins cant call self","Use ".concat(t.method," ").concat(u," in ").concat(r," plugin insteadof ").concat(e)].join(`
`))}}function Nr(e){var r=e.match(/(.*):(.*)/);return r?{method:r[1],name:r[2]}:!1}function Ft(e){return Object.keys(e).reduce(function(r,t){return t==="type"||(Y(e[t])?r[t]=Object.assign({},e[t]):r[t]=e[t]),r},{})}function Vt(e,r,t){var n={};return function(a){return function(u){return function(){var f=re(B.mark(function l(v){var m,y,A,h,w,I,N,P,x,O,C,T;return B.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(m=v.type,y=v.abort,A=v.plugins,h=v,!y){M.next=4;break}return M.abrupt("return",u(v));case 4:if(m===E.enablePlugin&&a.dispatch({type:E.initializeStart,plugins:A,disabled:[],fromEnable:!0,meta:v.meta}),m===E.disablePlugin&&setTimeout(function(){return mr(v.meta.rid,{payload:v})},0),m===E.initializeEnd&&(w=r(),I=Object.keys(w),N=I.filter(function(D){return A.includes(D)}).map(function(D){return w[D]}),P=[],x=[],O=v.disabled,C=N.map(function(D){var z=D.loaded,F=D.name;return yr(D,z,1e4).then(function(V){return n[F]||(a.dispatch({type:E.pluginReadyType(F),name:F,events:Object.keys(D).filter(function(H){return!Ge.includes(H)})}),n[F]=!0),P=P.concat(F),D}).catch(function(V){if(V instanceof Error)throw new Error(V);return x=x.concat(V.name),V})}),Promise.all(C).then(function(D){var z={plugins:P,failed:x,disabled:O};setTimeout(function(){I.length===C.length+O.length&&a.dispatch(p(p({},{type:E.ready}),z))},0)})),m===E.bootstrap){M.next=13;break}return/^ready:([^:]*)$/.test(m)&&setTimeout(function(){return br(a,r,e)},0),M.next=11,kt(v,r,e,a,t);case 11:return T=M.sent,M.abrupt("return",u(T));case 13:return M.abrupt("return",u(h));case 14:case"end":return M.stop()}},l)}));return function(l){return f.apply(this,arguments)}}()}}}function Wt(e){return function(r){return function(t){return function(n){var a=n.type,u=n.key,f=n.value,l=n.options;if(a===E.setItem||a===E.removeItem){if(n.abort)return t(n);a===E.setItem?e.setItem(u,f,l):e.removeItem(u,l)}return t(n)}}}}function Bt(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Ht=Bt,Jt=function e(){var r=this;Ht(this,e),ie(this,"before",[]),ie(this,"after",[]),ie(this,"addMiddleware",function(t,n){r[n]=r[n].concat(t)}),ie(this,"removeMiddleware",function(t,n){var a=r[n].findIndex(function(u){return u===t});a!==-1&&(r[n]=[].concat(Ee(r[n].slice(0,a)),Ee(r[n].slice(a+1))))}),ie(this,"dynamicMiddlewares",function(t){return function(n){return function(a){return function(u){var f={getState:n.getState,dispatch:function(m){return n.dispatch(m)}},l=r[t].map(function(v){return v(f)});return ve.apply(void 0,Ee(l))(a)(u)}}}})};function Xt(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a={};if(n.type==="initialize:aborted")return t;if(/^registerPlugin:([^:]*)$/.test(n.type)){var u=xr(n.type,"registerPlugin"),f=e()[u];if(!f||!u)return t;var l=n.enabled;return a[u]={enabled:l,initialized:l?Boolean(!f.initialize):!1,loaded:l?Boolean(f.loaded()):!1,config:f.config||{}},p(p({},t),a)}if(/^initialize:([^:]*)$/.test(n.type)){var v=xr(n.type,E.initialize),m=e()[v];return!m||!v?t:(a[v]=p(p({},t[v]),{initialized:!0,loaded:Boolean(m.loaded())}),p(p({},t),a))}if(/^ready:([^:]*)$/.test(n.type))return a[n.name]=p(p({},t[n.name]),{loaded:!0}),p(p({},t),a);switch(n.type){case E.disablePlugin:return p(p({},t),Tr(n.plugins,!1,t));case E.enablePlugin:return p(p({},t),Tr(n.plugins,!0,t));default:return t}}}function xr(e,r){return e.substring(r.length+1,e.length)}function Tr(e,r,t){return e.reduce(function(n,a){return n[a]=p(p({},t[a]),{enabled:r}),n},t)}function _r(e){try{return JSON.parse(JSON.stringify(e))}catch{}return e}var Yt={last:{},history:[]};function Kt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yt,r=arguments.length>1?arguments[1]:void 0,t=r.type,n=r.event,a=r.properties,u=r.options,f=r.meta;switch(t){case E.track:var l=_r(p(p({event:n,properties:a},Object.keys(u).length&&{options:u}),{},{meta:f}));return p(p({},e),{last:l,history:e.history.concat(l)});default:return e}}var Zt={actions:[]};function Qt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Zt,r=arguments.length>1?arguments[1]:void 0,t=r.type,n=r.payload;switch(t){case"queue":var a;return n&&n.type&&n.type===E.identify?a=[r].concat(e.actions):a=e.actions.concat(r),p(p({},e),{},{actions:a});case"dequeue":return[];default:return e}}var jr=/#.*$/;function en(){if(!!Z){for(var e=document.getElementsByTagName("link"),r=0,t;t=e[r];r++)if(t.getAttribute("rel")==="canonical")return t.getAttribute("href")}}function rn(e){var r=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g,t=r.exec(e),n=t&&t[3]?t[3].split("?")[0].replace(jr,""):"";return"/"+n}function tn(e){var r=en();return r?r.match(/\?/)?r:r+e:window.location.href.replace(jr,"")}var nn=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!Z)return r;var t=document,n=t.title,a=t.referrer,u=window,f=u.location,l=u.innerWidth,v=u.innerHeight,m=f.hash,y=f.search,A=tn(y),h={title:n,url:A,path:rn(A),hash:m,search:y,width:l,height:v};return a&&a!==""&&(h.referrer=a),p(p({},h),r)},an={last:{},history:[]};function un(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:an,r=arguments.length>1?arguments[1]:void 0,t=r.properties,n=r.options,a=r.meta;switch(r.type){case E.page:var u=_r(p({properties:t,meta:a},Object.keys(n).length&&{options:n}));return p(p({},e),{last:u,history:e.history.concat(u)});default:return e}}function on(){if(!Z)return!1;var e=navigator.appVersion;return~e.indexOf("Win")?"Windows":~e.indexOf("Mac")?"MacOS":~e.indexOf("X11")?"UNIX":~e.indexOf("Linux")?"Linux":"Unknown OS"}var Lr,Mr,Rr,Dr;Lr=on(),Mr=Z?document.referrer:null,Rr=Kr(),Dr=Zr();var kr={initialized:!1,sessionId:_e(),app:null,version:null,debug:!1,offline:Z?!navigator.onLine:!1,os:{name:Lr},userAgent:Z?navigator.userAgent:"node",library:{name:dr,version:"0.10.20"},timezone:Dr,locale:Rr,campaign:{},referrer:Mr};function sn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kr,r=arguments.length>1?arguments[1]:void 0,t=e.initialized,n=r.type,a=r.campaign;switch(n){case E.campaign:return p(p({},e),{campaign:a});case E.offline:return p(p({},e),{offline:!0});case E.online:return p(p({},e),{offline:!1});default:return t?e:p(p(p({},kr),e),{initialized:!0})}}var cn=["plugins","reducers","storage"];function fn(e){return Object.keys(e).reduce(function(r,t){return cn.includes(t)||(r[t]=e[t]),r},{})}function ln(e,r,t){if(!!Z){var n=window[(t?"add":"remove")+"EventListener"];e.split(" ").forEach(function(a){n(a,r)})}}function dn(){return Promise.resolve(!navigator.onLine)}function pn(e){var r=function(a){return dn().then(e)},t=ln.bind(null,"online offline",r);return t(!0),function(n){return t(!1)}}function Cr(){var e=ce+dr+ce;return pe(e,[]),function(r){return function(t,n,a){var u=r(t,n,a),f=u.dispatch,l=function(m){var y=m.action||m;return Ue[e].push(y),f(m)};return Object.assign(u,{dispatch:l})}}}function $r(e){return function(){return ve(ve.apply(null,arguments),Cr())}}function Je(e){return e?Xr(e)?e:[e]:[]}function vn(e){for(var r=e||Array.prototype.slice.call(arguments),t,n=0;n<r.length;n++)if(ee(r[n])){t=r[n];break}return t}function gn(){return new Date().getTime()}function hn(e,r){return function(t){r&&r(t),e(t)}}function Ur(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=_e();return r&&(Oe[n]=hn(r,vn(t))),p(p({},e),{},{rid:n,ts:gn()},r?{hasCallback:!0}:{})}function mn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.reducers||{},t=e.initialUser||{},n=(e.plugins||[]).reduce(function(o,i){if(ee(i))return o.middlewares=o.middlewares.concat(i),o;if(i.NAMESPACE&&(i.name=i.NAMESPACE),!i.name)throw new Error(mt+"1");var s=i.EVENTS?Object.keys(i.EVENTS).map(function(G){return i.EVENTS[G]}):[],g=i.enabled!==!1,S=!(i.config&&i.config.enabled===!1);o.pluginEnabled[i.name]=g&&S,delete i.enabled,i.methods&&(o.methods[i.name]=Object.keys(i.methods).reduce(function(G,k){return G[k]=c(i.methods[k]),G},{}),delete i.methods);var b=Object.keys(i),_=b.concat(s),j=new Set(o.events.concat(_));if(o.events=Array.from(j),o.pluginsArray=o.pluginsArray.concat(i),o.plugins[i.name])throw new Error(i.name+"AlreadyLoaded");return o.plugins[i.name]=i,o.plugins[i.name].loaded||(o.plugins[i.name].loaded=function(){return!0}),o},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),a=e.storage?e.storage:{getItem:Se,setItem:pe,removeItem:je},u=Et(a),f=n.plugins,l=n.events.filter(function(o){return!Ge.includes(o)}).sort(),v=new Set(l.concat(Me).filter(function(o){return!Ge.includes(o)})),m=Array.from(v).sort(),y=function(){return f},A=new Jt,h=A.addMiddleware,w=A.removeMiddleware,I=A.dynamicMiddlewares,N=function(){throw new Error("Abort disabled inListener")},P=Qr(),x=hr(a),O=p(p(p(p({},x),t),P.an_uid?{userId:P.an_uid}:{}),P.an_aid?{anonymousId:P.an_aid}:{});O.anonymousId||(O.anonymousId=_e());var C=p({enable:function(i,s){return new Promise(function(g){L.dispatch({type:E.enablePlugin,plugins:Je(i),_:{originalAction:E.enablePlugin}},g,[s])})},disable:function(i,s){return new Promise(function(g){L.dispatch({type:E.disablePlugin,plugins:Je(i),_:{originalAction:E.disablePlugin}},g,[s])})}},n.methods),T={identify:function(){var o=re(B.mark(function s(g,S,b,_){var j,G,k,U,q;return B.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return j=ye(g)?g:null,G=Y(g)?g:S,k=b||{},U=T.user(),pe(qe(oe),j),q=j||G.userId||u(oe,T,G),de.abrupt("return",new Promise(function(Hr){L.dispatch(p({type:E.identifyStart,userId:q,traits:G||{},options:k,anonymousId:U.anonymousId},U.id&&U.id!==j&&{previousId:U.id}),Hr,[S,b,_])}));case 7:case"end":return de.stop()}},s)}));function i(s,g,S,b){return o.apply(this,arguments)}return i}(),track:function(){var o=re(B.mark(function s(g,S,b,_){var j,G,k;return B.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(j=Y(g)?g.event:g,!(!j||!ye(j))){q.next=3;break}throw new Error("EventMissing");case 3:return G=Y(g)?g:S||{},k=Y(b)?b:{},q.abrupt("return",new Promise(function(xe){L.dispatch({type:E.trackStart,event:j,properties:G,options:k,userId:u(oe,T,S),anonymousId:u(ge,T,S)},xe,[S,b,_])}));case 6:case"end":return q.stop()}},s)}));function i(s,g,S,b){return o.apply(this,arguments)}return i}(),page:function(){var o=re(B.mark(function s(g,S,b){var _,j;return B.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return _=Y(g)?g:{},j=Y(S)?S:{},k.abrupt("return",new Promise(function(U){L.dispatch({type:E.pageStart,properties:nn(_),options:j,userId:u(oe,T,_),anonymousId:u(ge,T,_)},U,[g,S,b])}));case 3:case"end":return k.stop()}},s)}));function i(s,g,S){return o.apply(this,arguments)}return i}(),user:function(i){if(i===oe||i==="id")return u(oe,T);if(i===ge||i==="anonId")return u(ge,T);var s=T.getState("user");return i?rr(s,i):s},reset:function(i){return new Promise(function(s){L.dispatch({type:E.resetStart},s,i)})},ready:function(i){return T.on(E.ready,i)},on:function(i,s){if(!i||!ee(s))return!1;if(i===E.bootstrap)throw new Error(".on disabled for "+i);var g=/Start$|Start:/;if(i==="*"){var S=function(k){return function(U){return function(q){return q.type.match(g)&&s({payload:q,instance:T,plugins:f}),U(q)}}},b=function(k){return function(U){return function(q){return q.type.match(g)||s({payload:q,instance:T,plugins:f}),U(q)}}};return h(S,Re),h(b,De),function(){w(S,Re),w(b,De)}}var _=i.match(g)?Re:De,j=function(k){return function(U){return function(q){return q.type===i&&s({payload:q,instance:T,plugins:f,abort:N}),U(q)}}};return h(j,_),function(){return w(j,_)}},once:function(i,s){if(!i||!ee(s))return!1;if(i===E.bootstrap)throw new Error(".once disabled for "+i);var g=T.on(i,function(S){var b=S.payload;s({payload:b,instance:T,plugins:f,abort:N}),g()});return g},getState:function(i){var s=L.getState();return i?rr(s,i):Object.assign({},s)},dispatch:function(i){var s=ye(i)?{type:i}:i;if(bt(s.type))throw new Error("reserved action "+s.type);var g=i._||{},S=p(p({},s),{},{_:p({originalAction:s.type},g)});L.dispatch(S)},enablePlugin:C.enable,disablePlugin:C.disable,plugins:C,storage:{getItem:a.getItem,setItem:function(i,s,g){L.dispatch({type:E.setItemStart,key:i,value:s,options:g})},removeItem:function(i,s){L.dispatch({type:E.removeItemStart,key:i,options:s})}},setAnonymousId:function(i,s){T.storage.setItem(ne,i,s)},events:{all:m,core:Me,plugins:l}},W=function(i){return function(s){return function(g){return g.meta||(g.meta=Ur()),s(g)}}},M=n.middlewares.concat([W,I(Re),Vt(T,y,{all:m,plugins:l}),Wt(a),wt(T),It(T),I(De)]),D={context:sn,user:St(a),page:un,track:Kt,plugins:Xt(y),queue:Qt},z=ve,F=ve;if(Z&&e.debug){var V=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;V&&(z=V({trace:!0,traceLimit:25})),F=function(){return arguments.length===0?Cr():Y(J(arguments[0]))?$r():$r().apply(null,arguments)}}var H=fn(e),R=n.pluginsArray.reduce(function(o,i){var s=i.name,g=i.config,S=i.loaded,b=n.pluginEnabled[s];return o[s]={enabled:b,initialized:b?Boolean(!i.initialize):!1,loaded:Boolean(S()),config:g||{}},o},{}),Q={context:H,user:O,plugins:R},L=lr(gt(p(p({},D),r)),Q,F(z(ht.apply(void 0,Ee(M)))));function $(o){return function(i,s,g){var S=Ur(i.meta,s,Je(g)),b=p(p({},i),{meta:S});return o.apply(null,[b])}}L.dispatch=$(L.dispatch);var X=Object.keys(f);L.dispatch({type:E.bootstrap,plugins:X,config:H,params:P,user:O,initialUser:t,persistedUser:x});var K=X.filter(function(o){return n.pluginEnabled[o]}),d=X.filter(function(o){return!n.pluginEnabled[o]});L.dispatch({type:E.registerPlugins,plugins:X,enabled:n.pluginEnabled}),n.pluginsArray.map(function(o,i){var s=o.bootstrap,g=o.config,S=o.name;s&&ee(s)&&s({instance:T,config:g,payload:o}),L.dispatch({type:E.registerPluginType(S),name:S,enabled:n.pluginEnabled[S],plugin:o}),n.pluginsArray.length===i+1&&L.dispatch({type:E.initializeStart,plugins:K,disabled:d})}),pn(function(o){L.dispatch({type:o?E.offline:E.online})}),Pt(L,y,T);function c(o){return function(){for(var i=Array.prototype.slice.call(arguments),s=new Array(o.length),g=0;g<i.length;g++)s[g]=i[g];return s[s.length]=T,o.apply({instance:T},s)}}return T}var Re="before",De="after",Ae="cookie",le=qr(),zr=ke,yn=ke;function Gr(e){return le?ke(e,"",-1):je(e)}function qr(){if(typeof le!==ae)return le;try{ke("__x","__x"),le=document.cookie.indexOf("__x")!==-1,Gr("__x")}catch{le=!1}return le}function ke(e,r,t,n,a,u){if(typeof window!==ae){var f=arguments.length>1;return le||(f?pe(e,r):Se(e)),f?document.cookie=e+"="+encodeURIComponent(r)+(t?"; expires="+new Date(+new Date+1e3*t).toUTCString()+(n?"; path="+n:"")+(a?"; domain="+a:"")+(u?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var Ne="localStorage",me=Fr();function Fr(){if(typeof me!==ae)return me;me=!0;try{typeof localStorage!==ae&&typeof JSON!==ae||(me=!1),localStorage.setItem(ae,ae),localStorage.removeItem(ae)}catch{me=!1}return me}function Ce(e){var r=e;try{if((r=JSON.parse(e))==="true")return!0;if(r==="false")return!1;if(Y(r))return r;parseFloat(r)===r&&(r=parseFloat(r))}catch{}if(r!==null&&r!=="")return r}var bn=Fr(),wn=qr();function Vr(e,r){if(e){var t=Xe(r),n=!Ze(t),a=Ye(t)?Ce(localStorage.getItem(e)):void 0;if(n&&!be(a))return a;var u=Ke(t)?Ce(zr(e)):void 0;if(n&&u)return u;var f=Se(e);return n?f:{localStorage:a,cookie:u,global:f}}}function Sn(e,r,t){if(e&&!be(r)){var n={},a=Xe(t),u=JSON.stringify(r),f=!Ze(a);return Ye(a)&&(n[Ne]=er(Ne,r,Ce(localStorage.getItem(e))),localStorage.setItem(e,u),f)?n[Ne]:Ke(a)&&(n[Ae]=er(Ae,r,Ce(zr(e))),yn(e,u),f)?n[Ae]:(n[we]=er(we,r,Se(e)),pe(e,r),f?n[we]:n)}}function En(e,r){if(e){var t=Xe(r),n=Vr(e,ar),a={};return!be(n.localStorage)&&Ye(t)&&(localStorage.removeItem(e),a[Ne]=n.localStorage),!be(n.cookie)&&Ke(t)&&(Gr(e),a[Ae]=n.cookie),!be(n.global)&&Qe(t,we)&&(je(e),a[we]=n.global),a}}function Xe(e){return e?ye(e)?e:e.storage:nr}function Ye(e){return bn&&Qe(e,Ne)}function Ke(e){return wn&&Qe(e,Ae)}function Ze(e){return e===ar||e==="all"}function Qe(e,r){return e===nr||e===r||Ze(e)}function er(e,r,t){return{location:e,current:r,previous:t}}var In={setItem:Sn,getItem:Vr,removeItem:En},On=In;function Pn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var An=Pn;function Wr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Nn(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Wr(t,!0).forEach(function(n){An(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wr(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Br=Nn;function Tn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r={storage:On};return mn(Br(Br({},r),e))}export{Tn as Analytics,xn as CONSTANTS,E as EVENTS,Tn as default,Tn as init};
